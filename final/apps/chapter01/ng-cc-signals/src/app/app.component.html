<ng-cb-ui-header appTitle="Component communication using Signals" appName="ng-cc-signals">
  <div class="spacer"></div>
</ng-cb-ui-header>

<main class="content" role="main">
  <div class="mx-auto p-4">
    <div class="flex items-center justify-between mb-4">
      <h1 class="text-2xl">Task Manager</h1>
      <span>({{store.completedTodos().length}} / {{store.todos().length}})</span>
    </div>

    <!-- Task Input -->
    <form (ngSubmit)="submitNewTodo()" class="mb-4">
      <input name="newTodoInput" [(ngModel)]="newTodoTitle" class="p-2 border rounded mr-2" placeholder="New task..." />
      <button [disabled]="!newTodoTitle()" type="submit">Add</button>
    </form>

    <!-- Task List -->
    <ul>
      @for (task of store.filteredTodos(); track $index) {
        <li (click)="store.toggleTodo(task.id)" class="mb-2 flex gap-4 items-center cursor-pointer hover:opacity-70">
          <input type="checkbox" [checked]="task.completed" />
          <span [ngClass]="{'line-through': task.completed}">{{ task.title }}</span>
        </li>
      }
    </ul>

    <!-- Filters -->
    <div class="mt-4">
      <button [class.btn-primary]="store.filter() === 'all'" (click)="store.changeFilter('all')" class="p-2 rounded mr-2">All</button>
      <button [class.btn-primary]="store.filter() === 'active'" (click)="store.changeFilter('active')" class="p-2 rounded mr-2">Active</button>
      <button [class.btn-primary]="store.filter() === 'completed'" (click)="store.changeFilter('completed')" class="p-2 rounded">Completed</button>
    </div>
  </div>

</main>
<app-snackbar>
  Congratulations ðŸš€ You finished all the tasks!
</app-snackbar>
