"use strict";(self.webpackChunkng_perf_deferred=self.webpackChunkng_perf_deferred||[]).push([[704],{2324:(T,l,e)=>{e.r(l),e.d(l,{SwCharacterComponent:()=>D});var t=e(4496),s=e(1368),c=e(7400),m=e(9336),d=e(9144),g=e(2700),u=e(7048),v=e(112),C=e(7228),f=e(3992),y=e(5448),x=e(7773),O=e(308),I=e(320),F=e(560);function h(r,o){return o?n=>(0,C.W)(o.pipe((0,f.U)(1),function E(){return(0,y.i)((r,o)=>{r.subscribe((0,x.e)(o,O.K))})}()),n.pipe(h(r))):(0,c.O)((n,a)=>(0,F.Uv)(r(n,a)).pipe((0,f.U)(1),(0,I.e)(n)))}var S=e(4548);function p(r,o=v.M){const n=(0,S.k)(r,o);return h(()=>n)}let U=(()=>{class r{constructor(){this.http=(0,t.uUt)(u.KK),this.apiBaseUrl=`${location.href}assets/data`}fetchPerson(n){return this.http.get(`${this.apiBaseUrl}/people/${n}.json`).pipe(p(500*Math.floor(2*Math.random()+1)))}fetchFilm(n){return this.http.get(`${this.apiBaseUrl}/${n}.json`).pipe(p(500*Math.ceil(4*Math.random())))}static#t=this.\u0275fac=function(a){return new(a||r)};static#n=this.\u0275prov=t.wxM({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var $=e(720);function M(r,o){if(1&r&&(t.I0R(0,"div",5)(1,"h2",6),t.OEk(2),t.C$Y()()),2&r){const n=o.$implicit;t.yG2(2),t.oRS("Film: ",n.title,"")}}function j(r,o){if(1&r&&(t.SAx(0),t.I0R(1,"div",2),t.OEk(2),t.C$Y(),t.I0R(3,"div",3),t.yuY(4,M,3,1,"div",4),t.C$Y(),t.k70()),2&r){const n=t.GaO();t.yG2(2),t.oRS(" Person: ",n.person.name," "),t.yG2(2),t.E7m("ngForOf",n.person.filmObjects)}}function R(r,o){1&r&&t.wR5(0,"app-loader")}let D=(()=>{class r{constructor(){this.swapi=(0,t.uUt)(U),this.loadingData=!1}ngOnInit(){this.fetchData()}fetchData(){this.loadingData=!0,this.swapi.fetchPerson("1").pipe((0,c.O)(n=>{const a={...n,filmObjects:[]};return this.person=a,(0,m.y)(this.person.films.map(i=>this.swapi.fetchFilm(i)))}),(0,d.a)(n=>(console.error("Error while fetching films",n),alert("Could not get films. Please try again."),(0,g.of)([])))).subscribe({next:n=>{this.person.filmObjects=n,this.loadingData=!1},error:n=>{console.error("Error while fetching person",n)}})}static#t=this.\u0275fac=function(a){return new(a||r)};static#n=this.\u0275cmp=t.In1({type:r,selectors:[["app-sw-character"]],standalone:!0,features:[t.UHJ],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loader",""],[1,"person","flex","justify-center","text-2xl","mb-8"],[1,"films","grid","grid-cols-2","flex-wrap","gap-4"],["class","films__film w-42 p-4 text-center border border-black rounded-md",4,"ngFor","ngForOf"],[1,"films__film","w-42","p-4","text-center","border","border-black","rounded-md"],[1,"text-xl","mb-4"]],template:function(a,i){if(1&a&&t.yuY(0,j,5,2,"ng-container",0)(1,R,1,0,"ng-template",null,1,t.gJz),2&a){const G=t.Gew(2);t.E7m("ngIf",!i.loadingData)("ngIfElse",G)}},dependencies:[s.MD,s.ay,s.u_,$.E]})}return r})()}}]);